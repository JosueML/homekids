---
// Navbar.astro - Componente de navegación responsive para Cada Hogar Kids
---

<nav
    id="navbar"
    class="fixed top-0 left-0 right-0 z-50 bg-white shadow-md transition-all duration-300"
>
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
            <!-- Logo -->
            <div class="hrink-0 flex items-center">
                <a href="#inicio" class="flex items-center space-x-2">
                    <img
                        src="/logos/chk.svg"
                        alt="Cada Hogar Kids"
                        class="h-10 w-auto"
                    />
                    <span
                        class="hidden sm:block text-xl font-bold text-blue-900"
                    >
                        Cada Hogar Kids
                    </span>
                </a>
            </div>

            <!-- Desktop Menu -->
            <div class="hidden md:flex items-center space-x-8">
                <a
                    href="#inicio"
                    class="text-gray-700 hover:text-blue-600 font-medium transition-colors"
                >
                    Inicio
                </a>
                <a
                    href="#que-es"
                    class="text-gray-700 hover:text-blue-600 font-medium transition-colors"
                >
                    Sobre Nosotros
                </a>
                <a
                    href="#vision"
                    class="text-gray-700 hover:text-blue-600 font-medium transition-colors"
                >
                    Visión
                </a>
                <a
                    href="#valores"
                    class="text-gray-700 hover:text-blue-600 font-medium transition-colors"
                >
                    Valores
                </a>
                <a
                    href="#testimonios"
                    class="text-gray-700 hover:text-blue-600 font-medium transition-colors"
                >
                    Testimonios
                </a>
                <a
                    href="#contacto"
                    class="text-gray-700 hover:text-blue-600 font-medium transition-colors"
                >
                    Contacto
                </a>
                <a
                    href="#donar"
                    class="bg-green-600 text-white px-6 py-2 rounded-full hover:bg-green-700 font-semibold transition-all shadow-md hover:shadow-lg"
                >
                    Donar
                </a>
            </div>

            <!-- Mobile Menu Button -->
            <button
                id="mobile-menu-button"
                class="md:hidden inline-flex items-center justify-center p-2 rounded-md text-gray-700 hover:text-blue-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500 transition-colors"
                aria-expanded="false"
            >
                <span class="sr-only">Abrir menú</span>
                <!-- Icon when menu is closed -->
                <svg
                    id="menu-icon-closed"
                    class="block h-6 w-6"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
                <!-- Icon when menu is open -->
                <svg
                    id="menu-icon-open"
                    class="hidden h-6 w-6"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>
    </div>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="hidden md:hidden border-t border-gray-200">
        <div class="px-2 pt-2 pb-3 space-y-1 bg-white">
            <a
                href="#inicio"
                class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors"
            >
                Inicio
            </a>
            <a
                href="#que-es"
                class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors"
            >
                Sobre Nosotros
            </a>
            <a
                href="#vision"
                class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors"
            >
                Visión
            </a>
            <a
                href="#valores"
                class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors"
            >
                Valores
            </a>
            <a
                href="#testimonios"
                class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors"
            >
                Testimonios
            </a>
            <a
                href="#contacto"
                class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors"
            >
                Contacto
            </a>
            <a
                href="#donar"
                class="block mx-3 mt-2 px-4 py-2 text-center bg-green-600 text-white rounded-full hover:bg-green-700 font-semibold transition-all"
            >
                Donar
            </a>
        </div>
    </div>
</nav>

<!-- Spacer para compensar el navbar fixed -->
<div class="h-16"></div>

<script>
    // Toggle mobile menu
    const mobileMenuButton = document.getElementById("mobile-menu-button");
    const mobileMenu = document.getElementById("mobile-menu");
    const menuIconClosed = document.getElementById("menu-icon-closed");
    const menuIconOpen = document.getElementById("menu-icon-open");

    mobileMenuButton?.addEventListener("click", () => {
        const isHidden = mobileMenu?.classList.contains("hidden");

        if (isHidden) {
            mobileMenu?.classList.remove("hidden");
            menuIconClosed?.classList.add("hidden");
            menuIconOpen?.classList.remove("hidden");
            mobileMenuButton?.setAttribute("aria-expanded", "true");
        } else {
            mobileMenu?.classList.add("hidden");
            menuIconClosed?.classList.remove("hidden");
            menuIconOpen?.classList.add("hidden");
            mobileMenuButton?.setAttribute("aria-expanded", "false");
        }
    });

    // Close mobile menu when clicking on a link
    const mobileLinks = mobileMenu?.querySelectorAll("a");
    mobileLinks?.forEach((link) => {
        link.addEventListener("click", () => {
            mobileMenu?.classList.add("hidden");
            menuIconClosed?.classList.remove("hidden");
            menuIconOpen?.classList.add("hidden");
            mobileMenuButton?.setAttribute("aria-expanded", "false");
        });
    });

    // Navbar scroll effect - cambiar fondo al hacer scroll
    let lastScroll = 0;
    const navbar = document.getElementById("navbar");

    window.addEventListener("scroll", () => {
        const currentScroll = window.pageYOffset;

        if (currentScroll > 50) {
            navbar?.classList.add("shadow-lg");
        } else {
            navbar?.classList.remove("shadow-lg");
        }

        lastScroll = currentScroll;
    });

    // Smooth scroll para los enlaces
    document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            const target = document.querySelector(
                this.getAttribute("href") as string
            );
            if (target) {
                const navbarHeight = navbar?.offsetHeight || 0;
                const targetPosition =
                    target.getBoundingClientRect().top +
                    window.pageYOffset -
                    navbarHeight;

                window.scrollTo({
                    top: targetPosition,
                    behavior: "smooth",
                });
            }
        });
    });
</script>

<style>
    /* Animación suave para el menú móvil */
    #mobile-menu {
        transition:
            max-height 0.3s ease-in-out,
            opacity 0.3s ease-in-out;
    }

    /* Efecto hover mejorado para los enlaces */
    nav a {
        position: relative;
    }

    nav a::after {
        content: "";
        position: absolute;
        width: 0;
        height: 2px;
        bottom: -4px;
        left: 50%;
        background-color: #2563eb;
        transition: all 0.3s ease;
        transform: translateX(-50%);
    }

    nav a:hover::after {
        width: 100%;
    }

    /* Excluir el botón de donar del efecto de línea */
    nav a.bg-green-600::after {
        display: none;
    }
</style>
